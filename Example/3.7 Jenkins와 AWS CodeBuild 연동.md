# Jenkins와 AWS CodeBuild 연동
Jenkins에서 Build작업을 AWS CodeBuild와 통합하여 사용할 수 있다. 이렇게 하면 Jenkins 빌드 노드를 프로비저닝하고 구성/관리를 할 필요가 없다. 따라서 이 기능을 사용할 시 얻을 수 있는 리소스의 이점은 많다고 볼 수 있다.

여기서는 Jenkins구성이 이미 되어있다는 전제로 설명한다.

## Jenkins에 CodeBuild 연동
1. Jenkins 서버에 로그인한다.

2. **Jenkins 관리**를 클릭하고 **플러그인 관리**를 클릭한다.

3. 플러그인 관리 창에서 상단에 **설치 가능**탭을 선택한 후 오른쪽 상단에 `필터`에서 **AWS CodeBuild**를 입력한 후 검색한다.

4. 검색된 **AWS CodeBuild**를 선택하고 **재시작 없이 설치하기**버튼을 클릭하여 **AWS CodeBuild** plugin을 설치한다.

## Sample Code S3에 업로드
5. [이 링크](https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/samples/java-se-jetty-gradle-v3.zip)를 클릭하여 JAVA8 샘플 코드를 다운로드 받는다.

6. 다운받은 `java-se-jetty-gradle-v3.zip` 파일을 S3 Bucket에 업로드 한다.

## CodeBuild 사용
7. [AWS Web Console](https://signin.aws.amazon.com/console)에 로그인한다.

8. 왼쪽 상단에 **Services**를 클릭하여 **Developer Tools**영역에서 **CodeBuild**를 찾아 클릭한다.

9. **AWS CodeBuild**창이 뜨면 **Get started**버튼을 누른다.

10. **Step 1: Configure project**에서 다음과 같이 정보를 입력한 후 **Continue**버튼을 클릭한다.
    - `Project name`: 프로젝트 이름을 입력한다. 이름은 AWS내에서 고유해야 한다.
    - `Description`: 프로젝트의 설명을 입력한다. 옵션 값이니 여기서는 입력하지 않는다.
    - `Source provider`: Source 공급자 유형을 선택한다. [이 링크](https://docs.aws.amazon.com/ko_kr/codebuild/latest/userguide/create-project.html#create-project-console)를 참고하여 알맞은 유형을 선택한다. 여기서는 **Amazon S3**를 선택한다.
    - `Bucket`: Source Code가 있는 Bucket을 선택한다.
    - `S3 object key`: source Code가 포함된 .ZIP 파일의 Object key값을 입력한다.
    - `Environment image`: AWS CodeBuild가 관리하는 Docker 이미지를 사용하려면, **Use an image managed by AWS CodeBuild**를, 다른 Docker 이미지를 사용하려면 **Specify a Docker image**를 선택한다. 여기서는 **Use an image managed by AWS CodeBuild**를 선택한다.
    - `Operating system`: AWS CodeBuild가 관리하는 Docker 이미지를 배포할 운영체제를 선택한다. 여기서는 **Ubuntu**를 선택한다.
    - `Runtime`: Source Code의 Runtime을 선택한다. 여기서는 JAVA를 선택한다.
    - `Runtime version`: Runtime 버전을 선택한다. 여기서는 **aws/codedeploy/java:openjdk-8**을 선택한다.
    - `Privileged`: Docker 이미지를 작성하거나 빌드에서 상승 된 권한을 얻으려면 체크박스에 체크를 한다. 여기서는 체크하지 않는다.
    - `Build specification`:
    - `Buildspec name`:
    - `Certificate`:
    - `Artifacts: Where to put the artifacts from this build project Type`:
    - `Cache Type`:
    - `Service role`:
    - `VPC`: